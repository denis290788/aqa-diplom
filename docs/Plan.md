# План автоматизации

#### Объект тестирования

Веб-Приложение представляет из себя веб-сервис по покупке тура двумя способами:
* дебетовой картой
* выдачей кредита по реквизитам банковской карты

#### Валидные данные тестовых карт
* Номер разрешённой (APPROVED) карты: 4444 4444 4444 4441
* Номер запрещённой (DECLINED) карты: 4444 4444 4444 4442
* Месяц: двузначное число в диапазоне 01...12
* Год: больше текущего (максимально на 3 года), в формате двузначного числа
* Владелец: Имя и Фамилия латиницей
* CVC: Трёхзначное число в диапазоне 000...999

### Перечень автоматизируемых сценариев

#### **Позитивные сценарии**

**Основная задача:**
 Проверка покупки тура по дебетовой карте или в кредит при заполнении заявки валидными данными.

 **Ожидаемый результат:**
 При оплате тура картой со статусом APPROVED, 
 появляется сообщение : "Успешно! Операция одобрена банком". 
 В базах данных - MySQL и PostgresSQL должны появиться данные об операции в таблицах:
 * При оплате дебетовой картой - payment_entity и order_entity 
 * При оплате в кредит - credit_request_entity и order_entity.
 
 При оплате тура картой со статусом DECLINED, 
 появляется сообщение: "Ошибка! Банк отказал в проведении операции.". 
 В базе данных запись формируется только в таблицах payment_entity или credit_request_entity. 

01 Оплата тура по карте со статусом APPROVED
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
  - В поле номер карты ввести номер карты со статусом APPROVED
  - В поле месяц рандомно ввести номер месяца - 2 знака 
  - В поле год рандомно ввести "22", "23" или "24"
  - В поле "Владелец" с помощью библиотеки  faker ввести имя и 
    фамилию латиницей
  - В поле cvc/cvv ввести рандомно 3 цифры
  - Нажать кнопку "Продолжить" 
  
02 Оплата тура в кредит по карте со статусом APPROVED 
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты со статусом APPROVED   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"   
   
03 Оплата тура по карте со статусом DECLINED 
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты со статусом DECLINED   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"  
   
04 Оплата тура в кредит по карте со статусом DECLINED 
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты со статусом DECLINED   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"

#### **Негативные сценарии**
 
**Основная задача:**
 Проверить ввод невалидных данных в поля персональных данных заявки 
 на покупку тура. 
 
 **Ожидаемый результат:**
При вводе невалидных данных в поля с данными 
карты возникают сообщения о неверном вводе, заявка не отправляется, не появляется сообщение об успешном выполнении операции. 
В базе данных записи не формируются. 
   
05 Оплата тура по несуществующей карте 
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты "4444 4444 4444 4443"   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
06 Оплата тура в кредит по несуществующей карте 
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты "4444 4444 4444 4443"   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
07 Оплата тура по карте с неверно заполненным номером карты
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты "WWWW dii9 #%#%  889"   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
08 Оплата тура в кредит с неверно заполненным номером карты
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты "WWWW dii9 #%#%  889"   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
09 Оплата тура по карте с неверно заполненным полем имени
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" ввести "111 &fkdjhf"
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
10 Оплата тура в кредит по карте с несуществующим месяцем
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц ввести "13" 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
11 Оплата тура по карте с неверно заполненным полем месяца
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц ввести "&&"
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
          и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   	
12 Оплата тура в кредит по карте с ошибочно заполненным полем года
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год ввести год "FF"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
13 Оплата тура по карте с истекшим сроком действия
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц рандомно ввести номер месяца - 2 знака
   - В поле год ввести "19"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
          и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
14 Оплата тура в кредит с ошибочно заполненным полем CVV
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц рандомно ввести номер месяца - 2 знака 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести "Y7$"
   - Нажать кнопку "Продолжить"
   
15 Оплата тура с пустым полем имени
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц рандомно ввести номер месяца - 2 знака
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"
   
16 Оплата тура в кредит по карте с указанием месяца "00"
  - На странице выбора способа оплаты тура 
      нажимаем кнопку "Купить в кредит"
   - В поле номер карты ввести номер карты APPROVED   
   - В поле месяц ввести "00" 
   - В поле год рандомно ввести "22", "23" или "24"
   - В поле "Владелец" с помощью библиотеки  faker ввести имя 
     и фамилию латиницей
   - В поле cvc/cvv ввести рандомно 3 цифры
   - Нажать кнопку "Продолжить"

### Перечень используемых инструментов с обоснованием выбора
* IntelliJ IDEA — интегрированная среда разработки программного обеспечения
* Gradle — система управления зависимостями
* Java 8 - наиболее распространенная версия в настоящее время
* MySQL - база данных с которой может работать приложение
* PostgreSQL - вторая база данных с которой может работать приложение
* Docker Toolbox - система контейнерезации. Позволит подключить базы данных MySQL 
   и PostgresSQL
* Junit 5 - позволяет создавать автоматизированные тесты на java 
* Selenide - для автоматизации UI тестов на java c простым синтаксисом
* Faker - как генератор случайных имён владельца карты 
* lombok - упрощает написание программ на java
* Allure - генератор отчётов тестирования

### Перечень и описание возможных рисков при автоматизации
* Сложности в настройки Docker. 
  Необходимо проверить поддержку 2х СУБД - MySQL и PostgreSQL 
  и настроить работу симулятора банковских сервисов.  
* Нет документации к тестируемому приложению. О корректном поведении приходится строить догадки.
* Неуникальные локаторы, которые затрудняют поиск элементов 
  на страницах приложения. 
* Поскольку приложение состоит из нескольких страниц, 
  структура страниц может оказаться достаточно сложной, поэтому для написания pageObject потребуется больше времени.

### Интервальная оценка с учётом рисков (в часах)
* Подготовка к проведению тестирования: 30 часов
* Написание автотестов: 80 часов
* Подготовка отчетов о проведении тестирования: 10  

### План сдачи работ
* Написание и отладка тестов: 09 января 2021
* Оформление отчётов: 14 января 2021